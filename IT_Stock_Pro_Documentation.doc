<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
<head>
<meta charset="utf-8">
<style>
    body { font-family: 'Sarabun', 'Calibri', sans-serif; }
    h1 { color: #2E5894; border-bottom: 2px solid #2E5894; padding-bottom: 10px; }
    h2 { color: #4B6F44; margin-top: 20px; border-bottom: 1px solid #ddd; }
    h3 { color: #333; margin-top: 15px; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
    code { background-color: #f4f4f4; padding: 2px 5px; border-radius: 3px; font-family: Consolas, monospace; }
    pre { background-color: #f4f4f4; padding: 10px; border: 1px solid #ddd; overflow-x: auto; }
    .mermaid { display: none; } /* Hide mermaid code in word if desired, or show as text */
</style>
</head>
<body>

<h1>IT Stock Pro - Project Documentation</h1>

<h2>1. Project Overview</h2>
<p><strong>IT Stock Pro</strong> is a comprehensive Inventory Management System designed for IT departments to track assets, consumables, and procurement processes. It streamlines the flow from purchasing (PO) to receiving (Stock In) and disbursement (Stock Out), with automated reporting and OCR capabilities.</p>

<h2>2. User Roles & Permissions</h2>
<p>The system distinguishes between two main roles:</p>
<table>
    <thead>
        <tr>
            <th>Role</th>
            <th>Capabilities</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>Staff (Admin)</strong></td>
            <td>Full access. Can create POs, manage master data (vendors/products), import data manually, and adjust stock.</td>
        </tr>
        <tr>
            <td><strong>User</strong></td>
            <td>Limited access. Can view dashboard, inventory, and history. Can withdraw items (if enabled) but cannot modify master data or create POs.</td>
        </tr>
    </tbody>
</table>

<h2>3. Key Modules & Capabilities</h2>

<h3>üìä Dashboard</h3>
<ul>
    <li><strong>Real-time Overview:</strong> View total asset value, total items, and category distribution.</li>
    <li><strong>Low Stock Alerts:</strong> Instant visibility of items falling below minimum stock levels.</li>
    <li><strong>Visual Charts:</strong> Bar charts and pie charts for quick status assessment.</li>
</ul>

<h3>üì¶ Inventory Management</h3>
<ul>
    <li><strong>Stock Cards:</strong> Card-based view of all products with images and status.</li>
    <li><strong>Search & Filter:</strong> Find items by name, category, or status.</li>
    <li><strong>Barcode Support:</strong> Generate and print barcodes for physical tracking.</li>
    <li><strong>History:</strong> View detailed transaction logs for each item.</li>
</ul>

<h3>üõí Purchase Orders (PO)</h3>
<ul>
    <li><strong>PO Creation:</strong>
        <ul>
            <li><strong>Manual Mode:</strong> Key in simple POs.</li>
            <li><strong>OCR Mode:</strong> Upload PDF/Image POs to automatically extract Purchase Order Number, Vendor, Budget No, and Line Items using AI (Tesseract.js).</li>
        </ul>
    </li>
    <li><strong>Status Tracking:</strong> Track POs from Pending -> Received -> Completed.</li>
    <li><strong>Auto-Link:</strong> Automatically matches OCR-extracted items with Master Product Database.</li>
</ul>

<h3>üì• Receive Items (Stock In)</h3>
<ul>
    <li><strong>Receive against PO:</strong> Select a pending PO and mark items as received. Automatically updates stock and closes POs.</li>
    <li><strong>Partial Receiving:</strong> Support for receiving partial quantities (backorders).</li>
</ul>

<h3>üì§ Withdraw Items (Stock Out)</h3>
<ul>
    <li><strong>Disbursement:</strong> Record items taken out of stock for use by employees or departments.</li>
    <li><strong>Department Tracking:</strong> Track which section/department requested the item.</li>
</ul>

<h3>‚öôÔ∏è Management (Staff Only)</h3>
<ul>
    <li><strong>Master Data:</strong> Manage Product Categories, Vendors, and Units of Measure.</li>
    <li><strong>User Management:</strong> Manage system access and roles.</li>
</ul>

<h3>üìß Automations</h3>
<ul>
    <li><strong>Daily Email Reports:</strong> Automatic emails sent every morning at 08:00 AM containing:
        <ul>
            <li>List of <strong>Outstanding POs</strong> (Not yet received).</li>
            <li>List of <strong>Low Stock Items</strong>.</li>
        </ul>
    </li>
</ul>

<h2>4. System Workflows</h2>

<h3>Flow 1: Procurement Cycle (Purchase to Pay)</h3>
<p>This flow describes how stock enters the system via purchasing.</p>
<pre>
Start -> Create Purchase Order
       |-> Manual: Fill Form
       |-> OCR: Upload & Extract Data
       |
       V
Save PO (Pending) -> Wait for Delivery -> Receive Items
                                       |-> Full Delivery: Close PO
                                       |-> Partial Delivery: Keep PO Open
End
</pre>

<h3>Flow 2: Withdraw Cycle (Stock Out)</h3>
<p>This flow describes how items leave the inventory.</p>
<pre>
Employee Request -> Open Withdraw Page -> Scan Barcode / Select Item
-> Enter Quantity & Department -> Confirm Transaction -> Stock Decreases
-> Log History -> End
</pre>

<h3>Flow 3: Automated Monitoring</h3>
<p>Background processes that run daily.</p>
<pre>
08:00 AM Daily (Server Cron Job)
-> Query Pending POs & Low Stock Items from Database
-> Generate HTML Report
-> Send Email via SMTP Port 25
-> Admin Receives Report
</pre>

<h2>5. Technical Stack</h2>
<ul>
    <li><strong>Frontend:</strong> React, Vite, Tailwind CSS, Framer Motion, Recharts.</li>
    <li><strong>Backend:</strong> Node.js, Express.</li>
    <li><strong>Database:</strong> SQL Server (MSSQL).</li>
    <li><strong>OCR Engine:</strong> Tesseract.js (Client-side execution for privacy/speed).</li>
    <li><strong>Email:</strong> Nodemailer + Node-cron.</li>
</ul>

<h2>6. Database Schema</h2>
<p>The system uses <strong>SQL Server (MSSQL)</strong>. Below are the key tables and their functions:</p>

<h3>üìë Master Tables</h3>

<h4>Stock_Products</h4>
<p>Stores all inventory items.</p>
<table>
    <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
    <tbody>
        <tr><td>ProductII</td><td>INT (PK)</td><td>Unique ID (Auto-increment)</td></tr>
        <tr><td>ProductName</td><td>NVARCHAR</td><td>Name of the item</td></tr>
        <tr><td>DeviceType</td><td>VARCHAR</td><td>Category (Linked to Stock_DeviceTypes)</td></tr>
        <tr><td>CurrentStock</td><td>INT</td><td>Current quantity on hand</td></tr>
        <tr><td>MinStock</td><td>INT</td><td>Low stock alert threshold</td></tr>
        <tr><td>MaxStock</td><td>INT</td><td>Maximum stock level</td></tr>
        <tr><td>LastPrice</td><td>DECIMAL</td><td>Last purchased price</td></tr>
        <tr><td>ImageURL</td><td>NVARCHAR</td><td>Path to product image</td></tr>
        <tr><td>IsActive</td><td>BIT</td><td>1 = Active, 0 = Soft Deleted</td></tr>
    </tbody>
</table>

<h4>Stock_DeviceTypes</h4>
<p>Lookup table for product categories.</p>
<table>
    <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
    <tbody>
        <tr><td>TypeId</td><td>VARCHAR (PK)</td><td>Key (e.g., 'Monitor', 'Asset')</td></tr>
        <tr><td>Label</td><td>NVARCHAR</td><td>Display Name</td></tr>
    </tbody>
</table>

<h4>Stock_Vendors</h4>
<p>List of approved suppliers.</p>
<table>
    <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
    <tbody>
        <tr><td>VendorID</td><td>INT (PK)</td><td>Unique Vendor ID</td></tr>
        <tr><td>VendorName</td><td>NVARCHAR</td><td>Name of supplier</td></tr>
        <tr><td>ContactInfo</td><td>NVARCHAR</td><td>Address/Email/Phone</td></tr>
    </tbody>
</table>

<h3>üõí Transaction Tables</h3>

<h4>Stock_PurchaseOrders (PO Header)</h4>
<p>Stores PO information.</p>
<table>
    <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
    <tbody>
        <tr><td>PO_ID</td><td>NVARCHAR (PK)</td><td>PO Number (e.g., PO-202401-001)</td></tr>
        <tr><td>VendorName</td><td>NVARCHAR</td><td>Supplier</td></tr>
        <tr><td>Status</td><td>NVARCHAR</td><td>Open, Partial, Completed, Cancelled</td></tr>
        <tr><td>BudgetNo</td><td>NVARCHAR</td><td>Budget reference number</td></tr>
        <tr><td>PR_No</td><td>NVARCHAR</td><td>Purchase Request number</td></tr>
        <tr><td>DueDate</td><td>DATETIME</td><td>Expected delivery date</td></tr>
    </tbody>
</table>

<h4>Stock_PODetails (PO Items)</h4>
<p>Items within a Purchase Order.</p>
<table>
    <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
    <tbody>
        <tr><td>DetailID</td><td>INT (PK)</td><td>Unique Line ID</td></tr>
        <tr><td>PO_ID</td><td>NVARCHAR (FK)</td><td>Link to PO Header</td></tr>
        <tr><td>ProductID</td><td>INT (FK)</td><td>Link to Product (Nullable for non-stock items)</td></tr>
        <tr><td>ItemName</td><td>NVARCHAR</td><td>Item name (if manual/not in stock)</td></tr>
        <tr><td>QtyOrdered</td><td>INT</td><td>Total quantity ordered</td></tr>
        <tr><td>QtyReceived</td><td>INT</td><td>Quantity received so far</td></tr>
        <tr><td>UnitCost</td><td>DECIMAL</td><td>Cost per unit</td></tr>
    </tbody>
</table>

<h4>Stock_Transactions</h4>
<p>Logs ALL stock movements (In/Out).</p>
<table>
    <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
    <tbody>
        <tr><td>TransID</td><td>INT (PK)</td><td>Unique Log ID</td></tr>
        <tr><td>ProductID</td><td>INT (FK)</td><td>Product moved</td></tr>
        <tr><td>TransType</td><td>VARCHAR</td><td>'IN' (Receive) or 'OUT' (Withdraw)</td></tr>
        <tr><td>Qty</td><td>INT</td><td>Quantity moved</td></tr>
        <tr><td>RefInfo</td><td>NVARCHAR</td><td>Reference (e.g., Invoice No, 'Withdraw by John')</td></tr>
        <tr><td>TransDate</td><td>DATETIME</td><td>Timestamp</td></tr>
    </tbody>
</table>

<h4>Stock_UserRole</h4>
<p>Manages Staff/Admin access.</p>
<table>
    <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
    <tbody>
        <tr><td>Username</td><td>NVARCHAR</td><td>AD Username or Login ID</td></tr>
        <tr><td>CreatedBy</td><td>NVARCHAR</td><td>Who granted access</td></tr>
    </tbody>
</table>

</body>
</html>
